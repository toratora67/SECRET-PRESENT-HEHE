<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Anniversary Card</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body {
  margin:0;
  background: linear-gradient(#ffdde1,#ee9ca7);
  overflow-x:hidden;
  font-family: sans-serif;
  text-align:center;
}

/* Falling hearts */
.heart {
  position: fixed;
  top:-10px;
  color:#ff3b6f;
  animation: fall linear forwards;
}
@keyframes fall {
  to { transform: translateY(110vh); opacity:0; }
}

/* Envelope */
.envelope {
  width:300px;
  height:200px;
  background:#fff;
  margin:30px auto;
  position:relative;
  cursor:pointer;
  border-radius:8px;
}
.flap {
  position:absolute;
  width:100%;
  height:100%;
  background:#f8cdd2;
  clip-path: polygon(0 0,100% 0,50% 50%);
  transition:0.8s;
}
.open .flap { transform: rotateX(180deg); }

.message {
  font-family: 'Great Vibes', cursive;
  font-size:28px;
  padding:20px;
  opacity:0;
  transition:1s;
}
.open .message { opacity:1; }

/* Floral borders */
.border-roses { border:12px solid pink; }
.border-lilies { border:12px solid lavender; }
.border-sunflower { border:12px solid gold; }

/* Wax seals */
.seal {
  width:50px; height:50px;
  border-radius:50%;
  display:inline-block;
  margin:5px;
  cursor:pointer;
}
.red { background:#b30000; }
.gold { background:gold; }
.purple { background:purple; }

.gallery img {
  width:120px;
  margin:5px;
  border-radius:10px;
}

#map { height:300px; margin:20px; }

button {
  padding:10px 15px;
  margin:6px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>üíñ Anniversary Card üíñ</h1>

<!-- Message Input -->
<textarea id="userMsg" placeholder="Type your romantic message..."></textarea><br>
<button onclick="setMessage()">Apply Message</button>

<!-- Envelope -->
<div id="env" class="envelope border-roses" onclick="openEnvelope()">
  <div class="flap"></div>
  <div id="msgPreview" class="message"></div>
</div>

<!-- Wax Seal -->
<h3>Choose Wax Seal</h3>
<div class="seal red" onclick="alert('Red seal locked ‚ù§Ô∏è')"></div>
<div class="seal gold" onclick="alert('Golden seal locked üíõ')"></div>
<div class="seal purple" onclick="alert('Royal seal locked üíú')"></div>

<!-- Border selector -->
<h3>Floral Border</h3>
<select onchange="changeBorder(this.value)">
<option value="border-roses">Roses</option>
<option value="border-lilies">Lilies</option>
<option value="border-sunflower">Sunflower</option>
</select>

<!-- Music -->
<audio id="music" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_c8c8a73467.mp3">
</audio>
<button onclick="toggleMusic()">üéµ Music Toggle</button>

<!-- Gallery -->
<h3>Photo Gallery</h3>
<input type="file" multiple accept="image/*" onchange="loadPhotos(event)">
<div class="gallery" id="gallery"></div>

<!-- Countdown -->
<h3>Countdown to Special Day</h3>
<input type="date" id="datePick">
<button onclick="startCountdown()">Start Countdown</button>
<div id="countdown"></div>

<!-- Poem -->
<button onclick="generatePoem()">‚ú® Generate Secret Poem</button>
<div id="poem"></div>

<!-- Map -->
<h3>Memory Map</h3>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
/* Hearts animation */
setInterval(()=>{
  let h=document.createElement("div");
  h.className="heart";
  h.innerHTML="‚ù§";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(3+Math.random()*4)+"s";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),7000);
},400);

/* Envelope */
function openEnvelope(){
  document.getElementById("env").classList.toggle("open");
}
function setMessage(){
  document.getElementById("msgPreview").innerText =
    document.getElementById("userMsg").value;
}

/* Border */
function changeBorder(b){
  let e=document.getElementById("env");
  e.className="envelope "+b;
}

/* Music */
function toggleMusic(){
  let m=document.getElementById("music");
  m.paused ? m.play() : m.pause();
}

/* Gallery */
function loadPhotos(e){
  let g=document.getElementById("gallery");
  for (let f of e.target.files){
    let img=document.createElement("img");
    img.src=URL.createObjectURL(f);
    g.appendChild(img);
  }
}

/* Countdown */
function startCountdown(){
  let d=new Date(document.getElementById("datePick").value);
  setInterval(()=>{
    let diff=d-new Date();
    if(diff<0) return;
    let days=Math.floor(diff/86400000);
    document.getElementById("countdown").innerText =
      days+" days left üíû";
  },1000);
}

/* Poem generator */
function generatePoem(){
  const lines=[
    "Your smile is my sunrise",
    "Your voice is my favorite song",
    "Every moment with you is magic",
    "Our love writes its own story",
    "Forever begins with you"
  ];
  let poem="";
  for(let i=0;i<4;i++){
    poem+=lines[Math.floor(Math.random()*lines.length)]+"<br>";
  }
  document.getElementById("poem").innerHTML=poem;
}

/* Map */
let map=L.map('map').setView([3.139,101.6869],5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
.addTo(map);
map.on('click',e=>{
  L.marker(e.latlng).addTo(map)
   .bindPopup("Our memory ‚ù§Ô∏è").openPopup();
});
</script>

</body>
</html>
